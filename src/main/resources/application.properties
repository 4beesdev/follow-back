# ============================================
# follow-api (oris-backend) Application Properties
# ============================================
# All values can be overridden by environment variables.

# PostgreSQL
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/test}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:4beesJadran}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:NekiRandomPWD}

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
spring.jpa.properties.hibernate.temp.use_jdbc_metadata_defaults=false
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQL9Dialect
spring.jpa.properties.hibernate.event.merge.entity_copy_observer=allow

# HikariCP connection pool
spring.datasource.hikari.maximum-pool-size=${SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE:20}
spring.datasource.hikari.minimum-idle=${SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE:5}
spring.datasource.hikari.idle-timeout=${SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT:300000}
spring.datasource.hikari.max-lifetime=${SPRING_DATASOURCE_HIKARI_MAX_LIFETIME:600000}
spring.datasource.hikari.connection-timeout=${SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT:30000}
spring.datasource.hikari.leak-detection-threshold=${SPRING_DATASOURCE_HIKARI_LEAK_DETECTION_THRESHOLD:60000}

# File upload limits
spring.servlet.multipart.max-file-size=100MB
spring.servlet.multipart.max-request-size=100MB

# Firebase
gcp.firebase.service-account: ${GCP_FIREBASE_SERVICE_ACCOUNT:classpath:firebase.json}

# Mongo service (follow-gps-data) base URL
oris.mongo.base.url=${ORIS_MONGO_BASE_URL:http://follow-gps-data:8080}

# Server
server.port=${SERVER_PORT:8000}

# Logging
logging.level.rs.oris.back=${LOGGING_LEVEL_APP:DEBUG}
logging.level.org.springframework.web=${LOGGING_LEVEL_SPRING:INFO}
logging.file.name=${LOGGING_FILE_NAME:/home/root/logs/app.log}
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
